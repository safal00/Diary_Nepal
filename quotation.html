<!DOCTYPE html>
<html>
<head>
<title>Quotation Table</title>

<style>
table{
width:100%;
border-collapse:collapse;
font-family:Arial;
}

th,td{
border:1px solid #444;
padding:8px;
text-align:center;
}

th{
background:#2f5fa5;
color:white;
}

button{
padding:5px 10px;
cursor:pointer;
}

.undoBtn{
background:green;
color:white;
margin-bottom:10px;
}

.delBtn{
background:red;
color:white;
}
</style>
</head>

<body>

<button class="undoBtn" onclick="undoDelete()">Undo Delete</button>

<table id="itemTable">
<thead>
<tr>
<th>S.No</th>
<th>Description</th>
<th>Design</th>
<th>Size</th>
<th>Qty</th>
<th>Rate</th>
<th>Amount</th>
<th>Action</th>
</tr>
</thead>

<tbody>

<tr>
<td>1</td>
<td contenteditable></td>
<td><input type="file"></td>
<td contenteditable></td>
<td contenteditable></td>
<td contenteditable></td>
<td>0</td>
<td><button class="delBtn" onclick="deleteRow(this)">Delete</button></td>
</tr>

</tbody>
</table>

<script>

let lastDeletedRow=null;
let lastDeletedIndex=null;


// DELETE WITH CONFIRM
function deleteRow(btn){

if(!confirm("Are you sure to delete this row?")) return;

let row=btn.closest("tr");
let table=document.querySelector("#itemTable tbody");

lastDeletedIndex=Array.from(table.children).indexOf(row);
lastDeletedRow=row.cloneNode(true);

row.remove();

updateSerial();
addEmptyRowIfNeeded();
}


// UNDO DELETE
function undoDelete(){

if(!lastDeletedRow){
alert("Nothing to undo!");
return;
}

let table=document.querySelector("#itemTable tbody");

if(lastDeletedIndex>=table.children.length){
table.appendChild(lastDeletedRow);
}else{
table.insertBefore(lastDeletedRow,table.children[lastDeletedIndex]);
}

updateSerial();
lastDeletedRow=null;
}


// AUTO ADD EMPTY ROW
function addEmptyRowIfNeeded(){

let table=document.querySelector("#itemTable tbody");

if(table.children.length===0){
addNewRow();
}
}


// ADD NEW ROW
function addNewRow(){

let table=document.querySelector("#itemTable tbody");

let row=table.insertRow();

row.innerHTML=`
<td></td>
<td contenteditable></td>
<td><input type="file"></td>
<td contenteditable></td>
<td contenteditable></td>
<td contenteditable></td>
<td>0</td>
<td><button class="delBtn" onclick="deleteRow(this)">Delete</button></td>
`;

updateSerial();
}


// SERIAL UPDATE
function updateSerial(){
let rows=document.querySelectorAll("#itemTable tbody tr");
rows.forEach((row,index)=>{
row.cells[0].innerText=index+1;
});
}

</script>

</body>
</html>
