<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Quotation</title>

<style>
body{
font-family:Arial, sans-serif;
background:#f4f6fb;
padding:20px;
}

h2{
margin-bottom:10px;
}

button{
padding:6px 12px;
border:none;
background:#2f5ea3;
color:white;
cursor:pointer;
border-radius:4px;
}

.deleteBtn{
background:red;
}

table{
width:100%;
border-collapse:collapse;
background:white;
margin-top:10px;
}

th{
background:#2f5ea3;
color:white;
padding:10px;
}

td{
border:1px solid #ccc;
padding:8px;
vertical-align:top;
}

/* Description */
textarea{
width:100%;
min-height:120px;
resize:vertical;
padding:6px;
}

/* Inputs */
input[type="number"],
input[type="text"]{
width:100%;
padding:4px;
}

/* DESIGN BOX */
.designCell{
position:relative;
width:200px;
height:200px;
overflow:hidden;
border-radius:12px;
background:#eef1ff;
box-shadow:0 4px 12px rgba(0,0,0,0.15);
}

/* Hide real file input */
.uploadBtn input{
display:none;
}

/* Fake button */
.uploadBtn{
position:absolute;
top:50%;
left:50%;
transform:translate(-50%,-50%);
background:#2f5ea3;
color:white;
padding:8px 14px;
border-radius:8px;
cursor:pointer;
font-size:14px;
}

/* Image */
.designImg{
position:absolute;
top:50%;
left:50%;
transform:translate(-50%,-50%);
min-width:100%;
min-height:100%;
object-fit:cover;
display:none;
border-radius:12px;
transition:0.3s;
}

/* Hover zoom */
.designCell:hover .designImg{
transform:translate(-50%,-50%) scale(1.1);
}

/* Hide button after upload */
.designCell.hasImage .uploadBtn{
display:none;
}

/* Total row */
.totalRow td{
font-weight:bold;
background:#f1f3ff;
}

/* Print */
@media print{
button,
.uploadBtn{
display:none !important;
}
body{
background:white;
}
}

/* Mobile */
@media(max-width:768px){
.designCell{
width:150px;
height:150px;
}
}
</style>
</head>
<body>

<h2>QUOTATION</h2>

<button onclick="addRow()">Add Item</button>

<table id="quotationTable">
<thead>
<tr>
<th>S.No</th>
<th>Description</th>
<th>Design</th>
<th>Size</th>
<th>Qty</th>
<th>Rate</th>
<th>Amount</th>
<th>Action</th>
</tr>
</thead>
<tbody id="tableBody">
</tbody>

<tfoot>
<tr class="totalRow">
<td colspan="6" align="right">Grand Total</td>
<td id="grandTotal">0</td>
<td></td>
</tr>
</tfoot>
</table>

<script>

let rowCount = 0;

function addRow(){
rowCount++;

let tbody = document.getElementById("tableBody");

let row = document.createElement("tr");

row.innerHTML = `
<td>${rowCount}</td>

<td>
<textarea placeholder="Enter description..."></textarea>
</td>

<td class="designCell">
<label class="uploadBtn">
Choose Photo
<input type="file" accept="image/*" onchange="previewImage(this)">
</label>
<img class="designImg">
</td>

<td><input type="text"></td>

<td>
<input type="number" value="0" min="0" oninput="calculateRow(this)">
</td>

<td>
<input type="number" value="0" min="0" oninput="calculateRow(this)">
</td>

<td class="amount">0</td>

<td>
<button class="deleteBtn" onclick="deleteRow(this)">Delete</button>
</td>
`;

tbody.appendChild(row);
}

function previewImage(input){
let cell = input.closest(".designCell");
let img = cell.querySelector(".designImg");

if(input.files && input.files[0]){
img.src = URL.createObjectURL(input.files[0]);
img.style.display = "block";
cell.classList.add("hasImage");
}
}

function calculateRow(input){
let row = input.closest("tr");

let qty = parseFloat(row.cells[4].querySelector("input").value) || 0;
let rate = parseFloat(row.cells[5].querySelector("input").value) || 0;

let amount = qty * rate;

row.querySelector(".amount").innerText = amount;

calculateGrandTotal();
}

function calculateGrandTotal(){
let total = 0;

document.querySelectorAll(".amount").forEach(cell=>{
total += parseFloat(cell.innerText) || 0;
});

document.getElementById("grandTotal").innerText = total;
}

function deleteRow(btn){
if(confirm("Are you sure to delete?")){
btn.closest("tr").remove();
updateSerial();
calculateGrandTotal();
}
}

function updateSerial(){
let rows = document.querySelectorAll("#tableBody tr");
rowCount = rows.length;

rows.forEach((row,index)=>{
row.cells[0].innerText = index+1;
});
}

</script>

</body>
</html>
