<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quotation</title>

<style>

body{
  font-family: Arial;
}

table{
  width:100%;
  border-collapse:collapse;
}

td, th{
  border:1px solid #000;
  padding:5px;
  text-align:center;
}

/* photo style */
.photo-container{
  position:relative;
  width:80px;
  height:60px;
}

.preview{
  width:80px;
  height:60px;
  object-fit:contain;
  display:none;
}

.remove-btn{
  position:absolute;
  top:0;
  right:0;
  background:red;
  color:#fff;
  border:none;
  border-radius:50%;
  width:18px;
  height:18px;
  display:none;
  cursor:pointer;
}

.photo-container.has-image:hover .remove-btn{
  display:block;
}

</style>
</head>

<body>

<h2>QUOTATION</h2>

<table id="itemTable">

<tr>
<th>SN</th>
<th>Photo</th>
<th>Item</th>
<th>Qty</th>
<th>Rate</th>
<th>Total</th>
<th>Remove</th>
</tr>

<tr>
<td>1</td>

<td>
<div class="photo-container">

<input type="file" accept="image/*" onchange="previewImg(this)">
<img class="preview">
<button class="remove-btn" onclick="removeImg(this)">×</button>

</div>
</td>

<td contenteditable="true"></td>
<td contenteditable="true"></td>
<td contenteditable="true"></td>
<td></td>

<td>
<button onclick="deleteRow(this)">×</button>
</td>

</tr>

</table>

<br>

<button onclick="addRow()">Add Item</button>


<script>

/* photo preview */
function previewImg(input){

  const file = input.files[0];
  const container = input.parentElement;
  const img = container.querySelector('.preview');

  if(file){
    img.src = URL.createObjectURL(file);

    img.style.display = "block";
    input.style.display = "none";

    container.classList.add("has-image");
  }
}

/* remove photo */
function removeImg(btn){

  const container = btn.parentElement;
  const input = container.querySelector("input");
  const img = container.querySelector(".preview");

  input.value = "";
  img.src = "";

  img.style.display = "none";
  input.style.display = "block";

  container.classList.remove("has-image");
}


/* add row */
function addRow(){

  const table = document.getElementById("itemTable");
  const rowCount = table.rows.length;

  const row = table.insertRow();

  row.innerHTML = `
  <td>${rowCount}</td>

  <td>
  <div class="photo-container">

  <input type="file" accept="image/*" onchange="previewImg(this)">
  <img class="preview">
  <button class="remove-btn" onclick="removeImg(this)">×</button>

  </div>
  </td>

  <td contenteditable="true"></td>
  <td contenteditable="true"></td>
  <td contenteditable="true"></td>
  <td></td>

  <td>
  <button onclick="deleteRow(this)">×</button>
  </td>
  `;
}


/* delete row */
function deleteRow(btn){

  const row = btn.parentElement.parentElement;
  row.remove();

  const table = document.getElementById("itemTable");

  for(let i=1; i<table.rows.length; i++){
    table.rows[i].cells[0].innerText = i;
  }
}

</script>

</body>
</html>
