<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quotation Table Final</title>
<style>
body { font-family: Arial, sans-serif; margin:20px; background:#f0f4ff; }
table { width:100%; border-collapse: collapse; margin-bottom:20px; }
th, td { border:1px solid #ccc; padding:8px; text-align:left; }
th { background:#cce0ff; color:#003366; }
input[type=text], input[type=number] { width:100%; padding:5px; box-sizing:border-box; }
.photo-container { position:relative; width:80px; height:60px; }
.photo-container img { width:80px; height:60px; object-fit:contain; display:block; }
.remove-btn { 
    position:absolute; top:0; right:0; width:18px; height:18px; background:red; color:#fff; 
    border:none; border-radius:50%; cursor:pointer; display:none; font-weight:bold; line-height:16px; text-align:center; 
}
.photo-container:hover .remove-btn { display:block; }
button { padding:5px 10px; cursor:pointer; border:none; border-radius:4px; background:#0066cc; color:white; }
button:hover { background:#004080; }
</style>
</head>
<body>

<h2>Quotation Table</h2>
<table id="items-table">
<thead>
<tr>
<th>SN</th>
<th>Description</th>
<th>Design</th>
<th>Size</th>
<th>Qty</th>
<th>Unit Price</th>
<th>Total</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><input type="text" placeholder="Item Description"></td>
<td>
  <div class="photo-container">
    <input type="file" accept="image/*" onchange="previewImg(event,this)">
    <img>
    <button class="remove-btn" onclick="removeImg(this)">×</button>
  </div>
</td>
<td><input type="text" placeholder="Size"></td>
<td><input type="number" placeholder="0" oninput="updateRow(this)"></td>
<td><input type="number" placeholder="0" oninput="updateRow(this)"></td>
<td><input type="number" placeholder="0" readonly></td>
<td><button onclick="removeRow(this)">×</button></td>
</tr>
</tbody>
</table>
<button onclick="addItem()">+ Add Item</button>

<script>
function addItem(){
  const table = document.querySelector('#items-table tbody');
  const count = table.rows.length + 1;
  const row = table.insertRow();
  row.innerHTML = `<td>${count}</td>
<td><input type="text" placeholder="Item Description"></td>
<td>
  <div class="photo-container">
    <input type="file" accept="image/*" onchange="previewImg(event,this)">
    <img>
    <button class="remove-btn" onclick="removeImg(this)">×</button>
  </div>
</td>
<td><input type="text" placeholder="Size"></td>
<td><input type="number" placeholder="0" oninput="updateRow(this)"></td>
<td><input type="number" placeholder="0" oninput="updateRow(this)"></td>
<td><input type="number" placeholder="0" readonly></td>
<td><button onclick="removeRow(this)">×</button></td>`;
}

function previewImg(event,input){
  const file = input.files[0];
  const img = input.nextElementSibling;
  if(file){
    img.src = URL.createObjectURL(file);
    input.style.display = 'none'; // hide choose file after upload
  }
}

function removeImg(btn){
  const container = btn.parentElement;
  container.querySelector('input[type=file]').value='';
  container.querySelector('img').src='';
  container.querySelector('input[type=file]').style.display='block'; // restore choose file
}

function updateRow(el){
  const tr = el.closest('tr');
  const qty = +tr.cells[4].querySelector('input').value || 0;
  const price = +tr.cells[5].querySelector('input').value || 0;
  tr.cells[6].querySelector('input').value = qty * price;
}

function removeRow(btn){
  const row = btn.closest('tr');
  row.remove();
  const table = document.querySelector('#items-table tbody');
  Array.from(table.rows).forEach((r,i)=> r.cells[0].textContent=i+1);
}
</script>

</body>
</html>
