<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Quotation</title>

<style>
body { font-family: Arial, sans-serif; background:#f0f4ff; margin:0; padding:20px; }
.quotation-container { max-width:900px; margin:auto; background:#fff; padding:30px 40px; border-radius:8px; box-shadow:0 8px 20px rgba(0,0,0,0.1);}
h1 { text-align:center; color:#004080; margin-bottom:30px; }

.flex-container { display:flex; flex-wrap:wrap; justify-content:space-between; gap:10px; margin-bottom:20px; }
.flex-container .box { flex:1 1 48%; }

input, textarea {
width:100%; padding:6px 8px; margin-top:4px; margin-bottom:8px;
font-size:14px; border:1px solid #ccc; border-radius:4px; background:#f9f9f9;
}

table { width:100%; border-collapse: collapse; margin-top:12px; }
table th { padding:8px; text-align:left; border-bottom:2px solid #3399ff; background:#cce0ff; color:#003366; }
table td { padding:6px 8px; vertical-align:middle; }

img.preview { width:80px; height:60px; object-fit:contain; display:none; }

.photo-container { position: relative; width:80px; height:60px; }

.remove-btn {
position:absolute; top:0; right:0; background:red; color:#fff;
border:none; border-radius:50%; width:18px; height:18px;
cursor:pointer; font-size:12px; display:none;
}

button {
padding:6px 14px; background:#0066cc; color:#fff;
border:none; border-radius:4px; cursor:pointer; margin-top:5px;
}
button:hover { background:#004080; }

.actions { text-align:center; margin-top:20px; }

.totals { margin-top:15px; display:flex; flex-wrap:wrap; gap:10px; }
.totals div { flex:1 1 23%; display:flex; flex-direction:column; }

@media(max-width:768px){
table { display:block; overflow-x:auto; }
.flex-container .box { flex:1 1 100%; }
.totals div { flex:1 1 100%; }
}
</style>
</head>

<body>

<div class="quotation-container" id="quotation">
<h1>QUOTATION</h1>

<div class="flex-container">
<div class="box">
<h3>Client Details</h3>
<input type="text" placeholder="Client Name">
<input type="text" placeholder="Company Name">
<input type="text" placeholder="Address">
<input type="text" placeholder="Phone">
</div>

<div class="box">
<h3>Company Details</h3>
<input type="text" placeholder="Company Name">
<input type="text" placeholder="Address">
<input type="text" placeholder="Phone">
<input type="date">
<input type="text" placeholder="Quotation No.">
</div>
</div>

<table id="items-table">
<thead>
<tr>
<th>SN</th>
<th>Description</th>
<th>Design</th>
<th>Size</th>
<th>Qty</th>
<th>Unit Price</th>
<th>Total</th>
<th>Action</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><input type="text" placeholder="Item Description"></td>
<td>
<div class="photo-container">
<input type="file" accept="image/*" onchange="previewImg(event,this)">
<img class="preview">
<button class="remove-btn" onclick="removeImg(this)">×</button>
</div>
</td>
<td><input type="text" placeholder="Size"></td>
<td><input type="number" oninput="updateRow(this)" value="0"></td>
<td><input type="number" oninput="updateRow(this)" value="0"></td>
<td><input type="number" readonly value="0"></td>
<td><button onclick="removeRow(this)">×</button></td>
</tr>
</tbody>
</table>

<button onclick="addItem()">+ Add Item</button>

<div class="totals">
<div><label>Subtotal</label><input type="number" id="subtotal" readonly></div>
<div><label>Discount (%)</label><input type="number" id="discount" oninput="calculateTotals()"></div>
<div><label>Grand Total</label><input type="number" id="grandtotal" readonly></div>
</div>

</div>

<div class="actions">
<button onclick="window.print()">Print</button>
</div>

<script>

function addItem(){
const table = document.querySelector('#items-table tbody');
const count = table.rows.length + 1;
const row = table.insertRow();

row.innerHTML = `
<td>${count}</td>
<td><input type="text" placeholder="Item Description"></td>
<td>
<div class="photo-container">
<input type="file" accept="image/*" onchange="previewImg(event,this)">
<img class="preview">
<button class="remove-btn" onclick="removeImg(this)">×</button>
</div>
</td>
<td><input type="text" placeholder="Size"></td>
<td><input type="number" oninput="updateRow(this)" value="0"></td>
<td><input type="number" oninput="updateRow(this)" value="0"></td>
<td><input type="number" readonly value="0"></td>
<td><button onclick="removeRow(this)">×</button></td>
`;
}

function previewImg(event,input){
const file = input.files[0];
const container = input.parentElement;
const img = container.querySelector('img');
const removeBtn = container.querySelector('.remove-btn');

if(file){
img.src = URL.createObjectURL(file);
img.style.display = "block";
removeBtn.style.display = "block";
}
}

function removeImg(btn){
const container = btn.parentElement;
const input = container.querySelector('input[type=file]');
const img = container.querySelector('img');

input.value = "";
img.src = "";
img.style.display = "none";
btn.style.display = "none";
}

function updateRow(el){
const tr = el.closest('tr');
const qty = +tr.cells[4].querySelector('input').value || 0;
const price = +tr.cells[5].querySelector('input').value || 0;
tr.cells[6].querySelector('input').value = qty * price;
calculateTotals();
}

function calculateTotals(){
let subtotal = 0;
document.querySelectorAll('#items-table tbody tr').forEach(r=>{
subtotal += +r.cells[6].querySelector('input').value || 0;
});
document.getElementById('subtotal').value = subtotal;

const discount = +document.getElementById('discount').value || 0;
const grand = subtotal - (subtotal * discount / 100);
document.getElementById('grandtotal').value = grand.toFixed(2);
}

function removeRow(btn){
btn.closest('tr').remove();
const rows = document.querySelectorAll('#items-table tbody tr');
rows.forEach((r,i)=> r.cells[0].textContent = i+1);
calculateTotals();
}

</script>

</body>
</html>
