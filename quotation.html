<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Premium Quotation</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:'Segoe UI',Arial;background:linear-gradient(120deg,#e8ecff,#f5f7ff);margin:0;padding:20px}
.container{max-width:1150px;margin:auto;background:#fff;padding:25px;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.12)}
h1{text-align:center;color:#2d4da5;letter-spacing:2px;margin:10px 0}
.top-bar{display:flex;justify-content:flex-start;align-items:center;margin-bottom:10px}
.logo-box img{max-height:90px}
button{padding:8px 16px;border:none;border-radius:8px;background:linear-gradient(90deg,#2d4da5,#4b6fe0);color:#fff;margin:5px;cursor:pointer;font-weight:600}
.section{display:flex;justify-content:space-between;margin-top:20px}
.section div{width:32%;font-size:14px}
.edit{border-bottom:1px solid #888;min-width:160px;display:inline-block;padding:2px 4px}
table{width:100%;border-collapse:collapse;margin-top:20px;font-size:14px}
th:first-child, td:first-child{width:40px;min-width:40px;max-width:40px;padding:6px;text-align:center}
th:nth-child(2), td:nth-child(2){width:220px;max-width:220px}
th{background:linear-gradient(90deg,#2d4da5,#4b6fe0);color:#fff;padding:10px}
td{border-bottom:1px solid #cfd6ee;padding:8px;text-align:center}
.descBox{text-align:left;vertical-align:top;min-height:60px;white-space:pre-wrap;line-height:1.4}
tr.itemRow{border-bottom:2px solid #9fb0ff}
.designCell{width:110px;height:80px;background:#f4f6ff;border-radius:8px;cursor:pointer;overflow:hidden;position:relative}
.designCell span{font-size:11px;color:#7a86b6}
.designPreview{width:100%;height:100%;object-fit:cover;display:none}
.designInput{display:none}
.removeX{position:absolute;top:3px;right:3px;background:red;color:#fff;border:none;border-radius:50%;width:18px;height:18px;font-size:11px;display:none}
.designCell:hover .removeX{display:block}
.small{width:70px}
.amount{width:90px}
.total-box{text-align:right;margin-top:20px;font-size:18px;font-weight:bold;color:#1f3674}
.footer{margin-top:60px;font-size:14px;display:flex;justify-content:space-between;align-items:flex-start}
.signBox{width:45%;margin:auto;display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center}
.signBox{text-align:center}
.signBox img{max-width:120px;display:none;margin:8px auto;border-radius:6px}
.logoWrap{position:relative;display:inline-block}
.logoWrap .removeLogo{position:absolute;top:-6px;right:-6px;background:red;color:#fff;border:none;border-radius:50%;width:18px;height:18px;font-size:11px;display:none;cursor:pointer}
.logoWrap:hover .removeLogo{display:block}
.deleteRow{display:none;background:red;color:#fff;border:none;border-radius:50%;width:20px;height:20px;cursor:pointer}
tr.itemRow:hover .deleteRow{display:inline-block}
.terms{margin-top:30px}
.terms li{margin:4px 0}
</style>
</head>
<body>
<div class="container">
<div style="background:#f7f7f7;border-radius:14px;padding:25px 10px;margin-bottom:20px;text-align:center">
<h1 style="margin:0">Quotation</h1>
</div>

<div class="section">
<div>
<b>Company Details</b><br>
Company Name: <span class="edit" contenteditable onblur="cap(this)"></span><br>
Address: <span class="edit" contenteditable onblur="cap(this)"></span><br>
Phone: <span class="edit" contenteditable></span>
</div>
<div>
<b>Client Details</b><br>
Client Name: <span class="edit" contenteditable onblur="cap(this)"></span><br>
Address: <span class="edit" contenteditable onblur="cap(this)"></span><br>
Phone: <span class="edit" contenteditable></span>
</div>
<div>
<b>Quotation Info</b><br>
Quotation No: <span class="edit" contenteditable></span><br>
Date: <span class="edit" contenteditable></span>
</div>
</div>

<div style="margin-top:20px">
<button onclick="addRow()">Add Item</button>
<button onclick="window.print()">Print</button>
<button onclick="alert('PDF Ready')">Download PDF</button>
</div>

<table id="itemTable">
<tr>
<th>S.N</th>
<th>Description</th>
<th>Design</th>
<th class="small">Size</th>
<th class="small">Qty</th>
<th class="small">Rate</th>
<th class="amount">Amount</th>
</tr>
</table>

<div class="total-box">Grand Total: Rs. <span id="grandTotal">0.00</span></div>

<div class="footer" style="display:flex;justify-content:space-between">
<div class="signBox">
<input type="file" id="prepFile" accept="image/*" style="display:none" onchange="signUpload(event,'prepImg','prepBtn')">
<button id="prepBtn" onclick="document.getElementById('prepFile').click()">Upload Company Logo</button>
<div class="logoWrap"><img id="prepImg"><button class="removeLogo" onclick="removeLogo('prepImg','prepBtn')">×</button></div>
<br>
Prepared By: <input type="text" class="edit" placeholder="Type Name Here" onblur="this.value=this.value.toLowerCase().replace(/\b\w/g,function(l){return l.toUpperCase()})">
</div>
<div class="signBox">
<input type="file" id="appFile" accept="image/*" style="display:none" onchange="signUpload(event,'appImg','appBtn')">
<button id="appBtn" onclick="document.getElementById('appFile').click()">Upload Company Logo</button>
<div class="logoWrap"><img id="appImg"><button class="removeLogo" onclick="removeLogo('appImg','appBtn')">×</button></div>
<br>
Approved By (Client): <input type="text" class="edit" placeholder="Client Name Here" onblur="this.value=this.value.toLowerCase().replace(/\b\w/g,function(l){return l.toUpperCase()})">
</div>
</div>

<div class="terms">
<b style="text-transform:capitalize">Terms & Conditions</b>
<div contenteditable onblur="cap(this)">1</div>
<div contenteditable onblur="cap(this)">2</div>
<div contenteditable onblur="cap(this)">3</div>
<div contenteditable onblur="cap(this)">4</div>
<div contenteditable onblur="cap(this)">5</div>
</div>

</div>

<script>
let count=0

function cap(el){
let words=el.innerText.toLowerCase().split(' ')
el.innerText=words.map(w=>w.charAt(0).toUpperCase()+w.slice(1)).join(' ')
}

function loadLogo(e){
document.getElementById('logoBox').innerHTML=`<img src='${URL.createObjectURL(e.target.files[0])}'>`
document.getElementById('logoBtn').style.display='none'
}

function signUpload(e,imgId,btnId){
let img=document.getElementById(imgId)
img.src=URL.createObjectURL(e.target.files[0])
img.style.display='block'
document.getElementById(btnId).style.display='none'
}

function removeLogo(imgId,btnId){
let img=document.getElementById(imgId)
img.src=''
img.style.display='none'
document.getElementById(btnId).style.display='inline-block'
}

function addRow(){
count++
let row=document.getElementById('itemTable').insertRow()
row.className='itemRow'
row.innerHTML=`
<td>${count} <button class='deleteRow' onclick='deleteRow(this)'>×</button></td>
<td contenteditable onblur='cap(this)' class='descBox'></td>
<td class='designCell' onclick='filePick(this)'>
<span>Upload Photo</span>
<input type='file' accept='image/*' class='designInput'>
<img class='designPreview'>
<button class='removeX' onclick='removePhoto(this,event)'>×</button>
</td>
<td contenteditable></td>
<td contenteditable oninput='calc(this)'></td>
<td contenteditable oninput='calc(this)'></td>
<td class='amount'>0.00</td>`
}

function filePick(td){td.querySelector('.designInput').click()}

function removePhoto(btn,e){e.stopPropagation();let td=btn.closest('td');td.querySelector('img').style.display='none';td.querySelector('span').style.display='block'}

document.addEventListener('change',e=>{
if(e.target.classList.contains('designInput')){
let td=e.target.closest('td')
let img=td.querySelector('img')
img.src=URL.createObjectURL(e.target.files[0])
img.style.display='block'
td.querySelector('span').style.display='none'
}
})

function deleteRow(btn){
btn.closest('tr').remove()
renumberRows()
updateGrandTotal()
}

function renumberRows(){
let rows=document.querySelectorAll('#itemTable tr.itemRow')
rows.forEach((row,index)=>{
row.cells[0].childNodes[0].nodeValue=(index+1)+" "
})
count=rows.length
}

function updateGrandTotal(){
let total=0
Array.from(document.querySelectorAll('.amount')).forEach(a=>total+=parseFloat(a.innerText)||0)
document.getElementById('grandTotal').innerText=total.toFixed(2)
}


function calc(el){
let r=el.parentElement
let qty=parseFloat(r.cells[4].innerText)||0
let rate=parseFloat(r.cells[5].innerText)||0
r.cells[6].innerText=(qty*rate).toFixed(2)
let total=0
Array.from(document.querySelectorAll('.amount')).forEach(a=>total+=parseFloat(a.innerText)||0)
document.getElementById('grandTotal').innerText=total.toFixed(2)
}
</script>
</body>
</html>
