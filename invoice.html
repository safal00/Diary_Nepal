<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Delivery Challan</title>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Inter',sans-serif;}
body{background:#eef1f5;padding:30px;}
.wrapper{max-width:1000px;margin:auto;background:#fff;border-radius:12px;box-shadow:0 10px 30px rgba(0,0,0,0.1);padding:25px;}
.header{text-align:center;font-size:28px;font-weight:700;color:#1565c0;margin-bottom:20px;}
.top-section{display:flex;justify-content:space-between;margin-bottom:20px;}
.left, .right{width:48%;}
.left label, .right label{font-weight:700;font-size:14px;color:#333;}
.left input, .right input, .left textarea, .right textarea{width:100%;padding:8px;margin-top:4px;margin-bottom:10px;border-radius:5px;border:1px solid #ccd6e0;font-size:14px;}
.table-section table{width:100%;border-collapse:collapse;margin-bottom:15px;}
.table-section th, .table-section td{border:1px solid #ccd6e0;padding:10px;text-align:center;font-size:14px;}
.table-section th{background:#f0f4f8;font-weight:700;color:#1565c0;}
.add-remove{margin-bottom:15px;}
.add-remove button{padding:10px 12px;margin-right:5px;background:#1565c0;color:white;border:none;border-radius:5px;cursor:pointer;font-weight:600;}
.add-remove button:hover{background:#0d47a1;}
.total-section{display:flex;justify-content:flex-end;flex-direction:column;font-size:16px;font-weight:700;margin-bottom:20px;}
.total-section span{margin-left:0;}
.words{font-weight:400;font-size:14px;font-style:italic;color:#333;margin-top:4px;}
.footer{display:flex;justify-content:space-between;font-size:14px;margin-top:30px;}
.footer div span{font-weight:700;color:#1565c0;}
.thank-you{margin-top:25px;text-align:center;font-size:14px;font-style:italic;color:#555;}
</style>
</head>
<body>

<div class="wrapper">
<div class="header">Delivery Challan</div>

<div class="top-section">
<div class="left">
<label>Challan Number</label>
<input type="text" id="challanNo" value="CH-001">
<label>Company Name</label>
<input type="text" id="companyName" value="Nepali Print Solution" oninput="updatePreparedBy()">
<label>Date (dd/mm/yyyy)</label>
<input type="text" id="date" placeholder="dd/mm/yyyy">
<label>Address</label>
<textarea id="companyAddress" rows="2">Kathmandu, Nepal</textarea>
</div>

<div class="right">
<label>Buyer Name</label>
<input type="text" id="buyerName">
<label>Buyer Phone</label>
<input type="text" id="buyerPhone">
<label>Terms of Delivery</label>
<textarea id="terms" rows="2">Goods must be checked by customer.</textarea>
<label>Buyer Address</label>
<textarea id="buyerAddress" rows="2"></textarea>
</div>
</div>

<div class="table-section">
<div class="add-remove">
<button onclick="addRow()">Add Row</button>
<button onclick="removeRow()">Remove Row</button>
</div>
<table id="itemsTable">
<thead>
<tr>
<th>Description</th>
<th>Qty</th>
<th>Size</th>
<th>Square Feet</th>
<th>Rate</th>
<th>Amount</th>
</tr>
</thead>
<tbody>
<tr>
<td contenteditable="true"></td>
<td contenteditable="true" oninput="updateRow(this)">0</td>
<td contenteditable="true"></td>
<td contenteditable="true" oninput="updateRow(this)">0</td>
<td contenteditable="true" oninput="updateRow(this)">0</td>
<td>0</td>
</tr>
</tbody>
</table>
</div>

<div class="total-section">
<span>Grand Total: Rs. <span id="grandTotal">0</span></span>
<span class="words" id="grandTotalWords">Zero</span>
</div>

<div class="footer">
<div>Received By: <span id="receivedBy">_</span></div>
<div>Prepared By: <span id="preparedBy">Nepali Print Solution</span></div>
</div>

<div class="thank-you">Thank you for doing business with us!</div>
</div>

<script>
// Dynamic row functions
function addRow(){
  const table = document.getElementById('itemsTable').getElementsByTagName('tbody')[0];
  const newRow = table.insertRow();
  for(let i=0;i<6;i++){
    const cell = newRow.insertCell();
    if(i!==5) cell.contentEditable = true;
    else cell.innerText = 0;
    if(i===1||i===3||i===4) cell.setAttribute('oninput','updateRow(this)');
  }
}

function removeRow(){
  const table = document.getElementById('itemsTable').getElementsByTagName('tbody')[0];
  if(table.rows.length>1) table.deleteRow(table.rows.length-1);
  updateGrandTotal();
}

function updateRow(cell){
  const row = cell.parentElement;
  const qty = parseFloat(row.cells[1].innerText)||0;
  const sqft = parseFloat(row.cells[3].innerText)||0;
  const rate = parseFloat(row.cells[4].innerText)||0;
  const amount = qty*sqft*rate;
  row.cells[5].innerText = amount.toFixed(2);
  updateGrandTotal();
}

function updateGrandTotal(){
  const table = document.getElementById('itemsTable').getElementsByTagName('tbody')[0];
  let total =0;
  for(let i=0;i<table.rows.length;i++){
    total += parseFloat(table.rows[i].cells[5].innerText)||0;
  }
  document.getElementById('grandTotal').innerText = total.toFixed(2);
  document.getElementById('grandTotalWords').innerText = convertToWords(total);
}

// Convert number to words (simple version)
function convertToWords(amount){
  if(amount===0) return "Zero";
  const ones = ["","One","Two","Three","Four","Five","Six","Seven","Eight","Nine"];
  const tens = ["","Ten","Twenty","Thirty","Forty","Fifty","Sixty","Seventy","Eighty","Ninety"];
  const teens = ["Ten","Eleven","Twelve","Thirteen","Fourteen","Fifteen","Sixteen","Seventeen","Eighteen","Nineteen"];
  let num = Math.floor(amount);
  let words="";
  if(num>=1000){words += ones[Math.floor(num/1000)] + " Thousand "; num=num%1000;}
  if(num>=100){words += ones[Math.floor(num/100)] + " Hundred "; num=num%100;}
  if(num>=20){words += tens[Math.floor(num/10)]; if(num%10>0) words += " " + ones[num%10];}
  else if(num>=10){words+=teens[num-10];}
  else if(num>0){words+=ones[num];}
  return words + " Rupees";
}

// Update Prepared By footer when Company Name changes
function updatePreparedBy(){
  const name = document.getElementById('companyName').value;
  document.getElementById('preparedBy').innerText = name;
}
</script>

</body>
</html>
