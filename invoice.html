<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Invoice</title>
<style>
body{
  font-family: Arial;
  background:#e6f0ff;
  padding:20px;
}
.invoice{
  width:210mm;
  min-height:297mm;
  margin:auto;
  background:white;
  padding:20px;
  box-shadow:0 0 10px #999;
}

h1{
  text-align:center;
  letter-spacing:3px;
}

input{
  border:none;
  outline:none;
  background:transparent;
  width:100%;
  text-transform:capitalize;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:10px;
}
th,td{
  border:1px solid #000;
  padding:6px;
}
.no-print{
  text-align:center;
  margin-top:15px;
}
.btn{
  padding:6px 12px;
  margin:4px;
  cursor:pointer;
}

@media print{
  .no-print{display:none;}
  th:last-child,td:last-child{display:none;}
}
</style>
</head>

<body>

<div class="invoice" id="invoice">

<h1>INVOICE</h1>

Invoice No: <input id="invNo"><br>
Date: <input id="date"><br><br>

<b>Company</b><br>
<input placeholder="Company Name"><br>
<input placeholder="Address"><br><br>

<b>Buyer</b><br>
<input id="buyerName" list="buyers" placeholder="Buyer Name">
<datalist id="buyers"></datalist>
<input placeholder="Address"><br>
<input placeholder="Phone"><br><br>

<table id="tbl">
<thead>
<tr>
<th>S.N</th>
<th>Description</th>
<th>Qty</th>
<th>Rate</th>
<th>Amount</th>
<th>Action</th>
</tr>
</thead>
<tbody></tbody>
</table>

<h3 style="text-align:right">
Total Rs: <span id="total">0</span>
</h3>

Rupees in Words:
<input id="words"><br><br>

Prepared By:
<input id="preparedBy" placeholder="Prepared By">

</div>

<div class="no-print">
<button class="btn" onclick="addRow()">Add Item</button>
<button class="btn" onclick="window.print()">Print</button>
</div>

<script>
const tbody=document.querySelector("#tbl tbody");
const totalEl=document.getElementById("total");

function addRow(){
let r=document.createElement("tr");
r.innerHTML=`
<td></td>
<td><input></td>
<td><input type=number value=1></td>
<td><input type=number value=0></td>
<td><input readonly></td>
<td><button onclick="this.parentNode.parentNode.remove();calc()">X</button></td>`;
tbody.appendChild(r);
r.querySelectorAll("input").forEach(i=>i.oninput=calc);
calc();
}
addRow();

function calc(){
let t=0;
tbody.querySelectorAll("tr").forEach((r,i)=>{
r.cells[0].innerText=i+1;
let q=r.cells[2].firstChild.value||0;
let rate=r.cells[3].firstChild.value||0;
let a=q*rate;
r.cells[4].firstChild.value=a;
t+=a;
});
totalEl.innerText=t;
}

/* SAVE CUSTOMER HISTORY */
let buyers=JSON.parse(localStorage.getItem("buyers")||"[]");
let list=document.getElementById("buyers");
function load(){
list.innerHTML="";
buyers.forEach(b=>{
let o=document.createElement("option");
o.value=b;
list.appendChild(o);
});
}
load();

document.getElementById("buyerName").onchange=function(){
let n=this.value.trim();
if(n && !buyers.includes(n)){
buyers.push(n);
localStorage.setItem("buyers",JSON.stringify(buyers));
load();
}
};
</script>

</body>
</html>
