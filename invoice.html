<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Delivery Challan</title>

<style>
body{
  font-family: Arial;
  background:#f4f4f4;
}

.container{
  width:900px;
  margin:auto;
  background:white;
  padding:20px;
}

h2{
  text-align:center;
  margin-bottom:5px;
}

input{
  border:none;
  border-bottom:1px solid #000;
  font-size:14px;
}

table{
  width:100%;
  border-collapse:collapse;
  margin-top:15px;
}

th, td{
  border:1px solid black;
  padding:6px;
  text-align:center;
}

th{
  background:#eee;
}

.controls{
  margin-bottom:10px;
}

@media print{
  .controls{
    display:none;
  }
  body{
    background:white;
  }
}
</style>
</head>

<body>

<div class="controls">
  <button onclick="addRow()">Add Row</button>
  <button onclick="removeRow()">Remove Row</button>
  <button onclick="window.print()">Print</button>
</div>

<div class="container">

<h2>DELIVERY CHALLAN</h2>

<div>
Company Name:
<input type="text" placeholder="Your Company Name" style="width:300px"><br><br>

Address:
<input type="text" placeholder="Company Address" style="width:300px"><br><br>

Buyer Name:
<input type="text" style="width:300px">
</div>

<table id="bill">
<thead>
<tr>
<th>SN</th>
<th>Description of Goods</th>
<th>Qty</th>
<th>Size</th>
<th>SQ.FT</th>
<th>Rate</th>
<th>Amount</th>
</tr>
</thead>

<tbody>
<tr>
<td>1</td>
<td contenteditable="true"></td>
<td><input type="number" oninput="calc(this)"></td>
<td><input type="text" placeholder="2x3 or 24x36" oninput="calc(this)"></td>
<td class="sqft">0</td>
<td><input type="number" oninput="calc(this)"></td>
<td class="amount">0</td>
</tr>
</tbody>

<tfoot>
<tr>
<td colspan="5"></td>
<td><b>Grand Total</b></td>
<td id="grand">0</td>
</tr>
</tfoot>
</table>

</div>

<script>
function parseSize(size){
  size=size.toLowerCase().replace(/ /g,'');

  if(size.includes('x')){
    let parts=size.split('x');
    let w=parseFloat(parts[0]);
    let h=parseFloat(parts[1]);

    if(w>20 || h>20){
      return (w*h)/144; // inches → sqft
    }else{
      return w*h; // feet → sqft
    }
  }
  return 0;
}

function calc(el){
  let row=el.closest('tr');
  let qty=row.cells[2].children[0].value || 0;
  let size=row.cells[3].children[0].value;
  let rate=row.cells[5].children[0].value || 0;

  let sqft=parseSize(size);

  row.querySelector('.sqft').innerText=sqft.toFixed(2);

  let amount=qty*sqft*rate;
  row.querySelector('.amount').innerText=amount.toFixed(2);

  grandTotal();
}

function grandTotal(){
  let total=0;
  document.querySelectorAll('.amount').forEach(a=>{
    total+=parseFloat(a.innerText)||0;
  });
  document.getElementById('grand').innerText=total.toFixed(2);
}

function addRow(){
  let table=document.getElementById('bill').getElementsByTagName('tbody')[0];
  let row=table.rows[0].cloneNode(true);
  let count=table.rows.length+1;

  row.cells[0].innerText=count;
  row.querySelectorAll('input').forEach(i=>i.value="");
  row.querySelector('.sqft').innerText="0";
  row.querySelector('.amount').innerText="0";

  table.appendChild(row);
}

function removeRow(){
  let table=document.getElementById('bill').getElementsByTagName('tbody')[0];
  if(table.rows.length>1){
    table.deleteRow(-1);
    grandTotal();
  }
}
</script>

</body>
</html>
